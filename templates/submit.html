{% extends 'layout.html' %}

{% block body %}
	<header>
		<h1>Easy Maps</h1>
		<div class="container">
			<form class="form-inline" method="POST" action="/submit">
				<input id="start" class="location" type="text" placeholder="From" name="origin" required>
				<input id="end" class="location" type="text" placeholder="To" name="destination" required>
				<div id="travel-mode" class="form-group">
					<label>
						<input id="mode" type="radio" name="travel_mode" value="driving" class="mode" checked><i class="material-icons">directions_car</i>
					</label>
					<label>
						<input type="radio" name="travel_mode" value="bicycling" class="mode"><i class="material-icons">directions_bike</i>
					</label>
					<label>
						<input type="radio" name="travel_mode" value="walking" class="mode"><i class="material-icons">directions_walk</i>
					</label>
				</div>
				<input class="btn btn-success" type="submit" value="Find Route">
			</form>
		</div>
		<br>
		<hr>
	</header>

	<div class="row-spacer"></div>
	<div style="width: 80%" class="container-fluid">
		<div class="row flex-container">
			<!--time, distance, directions for trip-->
			<div class="col-md-4 box">
				{% with messages = get_flashed_messages() %}
					{% if messages %}
						{% for message in messages %}
							{{ message }}
						{% endfor %}
					{% endif %}
				{% endwith %}
				<h5>~{{ data["time"] }} ({{ data["distance"] }} miles)</h5>
				<hr>
				<div class="directions">
					<div class="col-md-12">
						<p style="padding: 5px 7px 0px; margin: 0">Start at <strong>{{ data["start_address"] }}</strong></p>
						<p style="padding: 7px 7px 10px"><button type="button" class="btn btn-primary reveal-button" data-location="origin">Enable Street View</button>&nbsp;&nbsp;<button class="btn reset-button" data-location="route-map">Reset</button></p>
						<ul>
							{% for step in data["directions"] %}
								<li>{{ step }}</li>
							{% endfor %}
						</ul>
						<p style="padding: 5px 7px 0px">Arrive at <strong>{{ data["end_address"] }}</strong></p>
						<p style="padding: 7px 7px 13px"><button class="btn btn-primary reveal-button" data-location="destination">Enable Street View</button>&nbsp;&nbsp;<button class="btn reset-button" data-location="route-map">Reset</button></p>
					</div>
				</div>
			</div>

			<!--map displaying trip route-->
			<div class="col-md-8 box">
				<iframe id="route-map" width=100% height="100%" frameborder="0" style="border:0; display: block" src="{{ directions_map_url }}" allowfullscreen></iframe>
			</div>
		</div>

		<!--street view images for start and end locations, URLs are extracted in layout.html-->
		<iframe id="origin" width="100%" height="500px" frameborder="0" style="border:0; display: none" src="{{ start_street_map_url }}" allowfullscreen></iframe>	
		<iframe id="destination" width="100%" height="500px" frameborder="0" style="border:0; display: none" src="{{ end_street_map_url }}" allowfullscreen></iframe>
	</div>

{% endblock %}



